# å…‰ä¼å…³æ–­å™¨è´Ÿè½½ç”µå‹ç”µæµæµ‹è¯•ä¸æ•°æ®ç®¡ç†ç³»ç»Ÿ

<div align="center">
  <img src="/public/images/logo.svg" alt="PV Testing System" width="120" height="120">
  
  <h3>å·¥ä¸šçº§å…‰ä¼æµ‹è¯•ä¸æ•°æ®ç®¡ç†å¹³å°</h3>
  
  <p>
    <img src="https://img.shields.io/badge/Next.js-14.0-black?logo=next.js" alt="Next.js">
    <img src="https://img.shields.io/badge/Node.js-18.0+-green?logo=node.js" alt="Node.js">
    <img src="https://img.shields.io/badge/TailwindCSS-3.0-blue?logo=tailwindcss" alt="TailwindCSS">
    <img src="https://img.shields.io/badge/License-MIT-yellow" alt="License">
  </p>
</div>

---

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

å…‰ä¼å…³æ–­å™¨è´Ÿè½½ç”µå‹ç”µæµæµ‹è¯•ä¸æ•°æ®ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸“ä¸ºå…‰ä¼è¡Œä¸šæ‰“é€ çš„å·¥ä¸šçº§æµ‹è¯•å¹³å°ã€‚ç³»ç»ŸåŸºäºç°ä»£WebæŠ€æœ¯æ ˆï¼Œå®ç°äº†ä»è®¾å¤‡æ§åˆ¶ã€æ•°æ®é‡‡é›†åˆ°å¯è§†åŒ–å±•ç¤ºçš„å…¨æµç¨‹è‡ªåŠ¨åŒ–ç®¡ç†ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ”§ **Modbus RTU é€šä¿¡** - å·¥ä¸šæ ‡å‡†åè®®ï¼Œç¨³å®šå¯é 
- âš¡ **é«˜é¢‘æ•°æ®é‡‡é›†** - æ”¯æŒæœ€é«˜1000Hzé‡‡æ ·ç‡
- ğŸ“Š **å®æ—¶æ•°æ®å¯è§†åŒ–** - å·¥ä¸šçº§æ›²çº¿å±•ç¤ºå’Œå¤§å±ç›‘æ§
- ğŸ” **æœ¬åœ°åŒ–éƒ¨ç½²** - æ•°æ®å®‰å…¨ï¼Œå®Œå…¨æŒæ§
- ğŸ¨ **ç°ä»£åŒ–UI** - é«˜ç«¯å·¥ä¸šç¾å­¦è®¾è®¡

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Next.js 14 (App Router)
- **UIæ¡†æ¶**: TailwindCSS 3.4
- **ç»„ä»¶åº“**: Radix UI + Shadcn/ui
- **å›¾è¡¨åº“**: Chart.js + Recharts
- **çŠ¶æ€ç®¡ç†**: Zustand
- **å®æ—¶é€šä¿¡**: Socket.io-client

#### åç«¯æŠ€æœ¯
- **è¿è¡Œæ—¶**: Node.js 18+
- **æ¡†æ¶**: Express.js
- **é€šä¿¡åè®®**: Modbus RTU (serialport)
- **æ•°æ®åº“**: SQLite / PostgreSQL
- **å®æ—¶é€šä¿¡**: Socket.io
- **è®¤è¯**: JWT

#### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**: pnpm
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **Git Hooks**: Husky + lint-staged
- **æµ‹è¯•**: Jest + React Testing Library

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±•ç¤ºå±‚"
        A[Next.jsåº”ç”¨]
        B[å®æ—¶ç›‘æ§ç•Œé¢]
        C[æ•°æ®ç®¡ç†ç•Œé¢]
        D[å¤§å±å±•ç¤ºç³»ç»Ÿ]
    end
    
    subgraph "APIæœåŠ¡å±‚"
        E[RESTful API]
        F[WebSocketæœåŠ¡]
        G[è®¤è¯ä¸­é—´ä»¶]
    end
    
    subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
        H[Modbusé€šä¿¡æ¨¡å—]
        I[æ•°æ®å¤„ç†å¼•æ“]
        J[æƒé™ç®¡ç†æ¨¡å—]
    end
    
    subgraph "æ•°æ®å±‚"
        K[SQLite/PostgreSQL]
        L[Redisç¼“å­˜]
        M[æ–‡ä»¶å­˜å‚¨]
    end
    
    subgraph "ç¡¬ä»¶å±‚"
        N[æµ‹è¯•è®¾å¤‡]
        O[ä¼ æ„Ÿå™¨]
    end
    
    A --> E
    B --> F
    C --> E
    D --> F
    
    E --> G
    F --> G
    G --> H
    G --> I
    G --> J
    
    H --> K
    I --> K
    I --> L
    J --> K
    
    H --> N
    H --> O
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0
- pnpm >= 8.0
- Git

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-repo/pv-testing-system.git
cd pv-testing-system
```

2. **å®‰è£…ä¾èµ–**
```bash
pnpm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env.local
# ç¼–è¾‘ .env.local é…ç½®æ•°æ®åº“ã€ä¸²å£ç­‰å‚æ•°
```

4. **æ•°æ®åº“åˆå§‹åŒ–**
```bash
pnpm db:migrate
pnpm db:seed
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
pnpm dev
```

6. **è®¿é—®ç³»ç»Ÿ**
```
http://localhost:3000
```

### ç”Ÿäº§éƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
```bash
pnpm build
```

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡**
```bash
pnpm start
```

3. **ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹**
```bash
pm2 start ecosystem.config.js
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
pv-testing-system/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/              # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ (dashboard)/         # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ api/                 # APIè·¯ç”±
â”‚   â”œâ”€â”€ components/          # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ layout.tsx           # æ ¹å¸ƒå±€
â”œâ”€â”€ components/              # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                 # UIåŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ charts/             # å›¾è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ modbus/             # Modbusæ§åˆ¶ç»„ä»¶
â”‚   â””â”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ lib/                     # å·¥å…·åº“
â”‚   â”œâ”€â”€ modbus/             # Modbusé€šä¿¡
â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ auth/               # è®¤è¯é€»è¾‘
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ services/               # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ api/                # APIæœåŠ¡
â”‚   â”œâ”€â”€ websocket/          # WebSocketæœåŠ¡
â”‚   â””â”€â”€ workers/            # åå°ä»»åŠ¡
â”œâ”€â”€ prisma/                 # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ schema.prisma       # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ migrations/         # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ styles/                 # å…¨å±€æ ·å¼
â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ”§ åŠŸèƒ½æ¨¡å—

### 1. å®éªŒæ§åˆ¶æ¨¡å—

#### Modbus RTU é€šä¿¡
- è‡ªåŠ¨è®¾å¤‡å‘ç°
- å‚æ•°å®æ—¶è¯»å†™
- é€šä¿¡çŠ¶æ€ç›‘æ§
- å¼‚å¸¸è‡ªåŠ¨é‡è¿

#### å•ä½å‹é«˜ç”µæµæµ‹è¯•
- ç”µå‹èŒƒå›´ï¼š1-50V
- ç”µæµèŒƒå›´ï¼š0-1000A
- ç²¾ç¡®æ§åˆ¶ä¸ä¿æŠ¤
- å®æ—¶å‚æ•°è°ƒèŠ‚

#### åŒç”µæºåˆ‡æ¢å®éªŒ
- æ¯«ç§’çº§åˆ‡æ¢æ§åˆ¶
- åˆ‡æ¢æ—¶åºè®°å½•
- ç¬æ€å‚æ•°æ•è·
- æˆåŠŸç‡ç»Ÿè®¡

### 2. æ•°æ®ç®¡ç†æ¨¡å—

#### æ•°æ®é‡‡é›†å­˜å‚¨
- é«˜é¢‘é‡‡æ ·ï¼ˆæœ€é«˜1000Hzï¼‰
- è‡ªåŠ¨æ•°æ®å‹ç¼©
- å®šæ—¶å½’æ¡£ç­–ç•¥
- å­˜å‚¨å®¹é‡ç›‘æ§

#### æŸ¥è¯¢æ£€ç´¢å¯¼å‡º
- å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢
- ç§’çº§æŸ¥è¯¢å“åº”
- å¤šæ ¼å¼æ•°æ®å¯¼å‡º
- æ‰¹é‡æ“ä½œæ”¯æŒ

### 3. å¯è§†åŒ–æ¨¡å—

#### å®æ—¶æ›²çº¿å±•ç¤º
- å¤šå‚æ•°åŒæ­¥æ˜¾ç¤º
- 10msçº§å®æ—¶åˆ·æ–°
- äº¤äº’å¼æ“ä½œ
- å¼‚å¸¸æ ‡æ³¨æé†’

#### å†å²æ•°æ®åˆ†æ
- ä»»æ„æ—¶æ®µå›æ”¾
- å¤šç»„æ•°æ®å¯¹æ¯”
- è¶‹åŠ¿åˆ†ææŠ¥å‘Š
- ç»Ÿè®¡å›¾è¡¨ç”Ÿæˆ

### 4. å¤§å±å±•ç¤ºæ¨¡å—

#### æ•°æ®æ€»è§ˆå¤§å±
- 4Kåˆ†è¾¨ç‡é€‚é…
- å…³é”®æŒ‡æ ‡å±•ç¤º
- å®æ—¶æ•°æ®æ›´æ–°
- å¯å®šåˆ¶åŒ–å¸ƒå±€

---

## ğŸ¨ UI/UX è®¾è®¡

### è®¾è®¡ç†å¿µ
- **å·¥ä¸šç¾å­¦**: ç®€æ´ã€ç²¾å‡†ã€ä¸“ä¸š
- **ç°ä»£é£æ ¼**: æ‰å¹³åŒ–ã€æ¸å˜ã€åŠ¨æ•ˆ
- **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚ã€é«˜æ•ˆã€å“åº”å¼

### ä¸»é¢˜é…ç½®
```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#E0F2FE',
          500: '#0D9488',
          900: '#1B263B'
        },
        industrial: {
          dark: '#111827',
          card: '#1F2937',
          border: '#374151'
        }
      }
    }
  }
}
```

---

## ğŸ”’ å®‰å…¨æ€§

### è®¤è¯æˆæƒ
- JWT Tokenè®¤è¯
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼ˆRBACï¼‰
- ä¼šè¯ç®¡ç†
- æ“ä½œå®¡è®¡æ—¥å¿—

### æ•°æ®å®‰å…¨
- ä¼ è¾“åŠ å¯†ï¼ˆHTTPSï¼‰
- æ•°æ®åº“åŠ å¯†å­˜å‚¨
- å®šæœŸè‡ªåŠ¨å¤‡ä»½
- è®¿é—®æ§åˆ¶åˆ—è¡¨

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- å›¾ç‰‡ä¼˜åŒ–ï¼ˆNext.js Imageï¼‰
- ç¼“å­˜ç­–ç•¥
- è™šæ‹Ÿæ»šåŠ¨

### åç«¯ä¼˜åŒ–
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- æŸ¥è¯¢ç»“æœç¼“å­˜
- è¿æ¥æ± ç®¡ç†
- è´Ÿè½½å‡è¡¡

---

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
pnpm test:unit
```

### é›†æˆæµ‹è¯•
```bash
pnpm test:integration
```

### E2Eæµ‹è¯•
```bash
pnpm test:e2e
```

### æµ‹è¯•è¦†ç›–ç‡
```bash
pnpm test:coverage
```

---

## ğŸ“š APIæ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- Base URL: `http://localhost:3000/api/v1`
- è®¤è¯æ–¹å¼: Bearer Token
- å“åº”æ ¼å¼: JSON

### ä¸»è¦æ¥å£

#### è®¤è¯æ¥å£
```http
POST /auth/login
POST /auth/logout
POST /auth/refresh
```

#### å®éªŒæ§åˆ¶
```http
POST /experiment/start
POST /experiment/stop
GET  /experiment/status
PUT  /experiment/config
```

#### æ•°æ®ç®¡ç†
```http
GET  /data/query
GET  /data/export
GET  /data/statistics
POST /data/archive
```

è¯¦ç»†APIæ–‡æ¡£è¯·æŸ¥çœ‹ [API Documentation](./docs/api.md)

---

## ğŸ› ï¸ ç»´æŠ¤æŒ‡å—

### æ—¥å¿—ç®¡ç†
- æ—¥å¿—ä½ç½®ï¼š`./logs/`
- æ—¥å¿—çº§åˆ«ï¼šerror, warn, info, debug
- æ—¥å¿—è½®è½¬ï¼šæ¯æ—¥è½®è½¬ï¼Œä¿ç•™30å¤©

### æ•°æ®åº“ç»´æŠ¤
```bash
# å¤‡ä»½æ•°æ®åº“
pnpm db:backup

# æ¢å¤æ•°æ®åº“
pnpm db:restore

# æ¸…ç†æ—§æ•°æ®
pnpm db:cleanup
```

### æ€§èƒ½ç›‘æ§
- ä½¿ç”¨PM2ç›‘æ§è¿›ç¨‹çŠ¶æ€
- å®šæœŸæ£€æŸ¥æ•°æ®åº“æ€§èƒ½
- ç›‘æ§APIå“åº”æ—¶é—´

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª ESLint é…ç½®
- ä½¿ç”¨ Prettier æ ¼å¼åŒ–
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®ä¸»é¡µ: [https://github.com/your-repo/pv-testing-system](https://github.com/your-repo/pv-testing-system)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-repo/pv-testing-system/issues)
- é‚®ç®±: support@pv-testing.com

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

## ğŸ“… ä»»åŠ¡è¿½è¸ª

### å·²å®Œæˆä»»åŠ¡
- [x] ç¼–å†™PRDæ–‡æ¡£ - 2025-01-09
- [x] ç¼–å†™READMEæ–‡æ¡£ - 2025-01-09

### è¿›è¡Œä¸­ä»»åŠ¡
- [ ] å¼€å‘å®éªŒæ§åˆ¶ç•Œé¢
- [ ] å¼€å‘æ•°æ®ç®¡ç†ç³»ç»Ÿ
- [ ] å¼€å‘æ›²çº¿å±•ç¤ºç³»ç»Ÿ
- [ ] å¼€å‘æ•°æ®æ€»è§ˆå¤§å±

### å‘ç°çš„å­ä»»åŠ¡
- [ ] é…ç½®ESLintå’ŒPrettier
- [ ] è®¾ç½®Git Hooks
- [ ] åˆ›å»ºUIç»„ä»¶åº“
- [ ] å®ç°Modbusé€šä¿¡æ¨¡å—

---

**æœ€åæ›´æ–°**: 2025-01-09
